<ion-view view-title="Tour">
    <ion-content>
        <div class="display-card">
            
            
            <marker-map map-handle="mapHandle" center="mapInfo.center" zoom="mapInfo.zoom">
                <marker id='{{landmark.id}}' position="{{[landmark.location.lat,landmark.location.lng]}}" ng-repeat="landmark in tour.landmarks" icon="{{iconFor($index)}}"> 
                
                    
                
                </marker>
                <user-location-marker></user-location-marker>                
          </marker-map>
            
            <div ng-if="tour.landmarks[index]&&!loadingMsg">
                
                    <div ng-click="upNextClicked()">
                        <div class="list-item-title">
                            Next up
                        </div>
                        <div class="list-item-title">
                            {{tour.landmarks[index].name}}
                        </div>
                        <div class="list-item-subtitle">
                            {{tour.landmarks[index].description[0]}}
                        </div>
                    </div>
                    <div class="up-next-button-row" style="text-align:center;">
                        <span style="float:left" ng-click="toPrev()">
                            <i class="ion-chevron-left"></i>
                            Back
                        </span>
                        <span style="float:right" ng-click="toNext()">
                            Next
                            <i class="ion-chevron-right"> </i>
                        </span>

                        <span>{{index+1}}/{{tour.landmarks.length}} </span>

                    </div>
            </div>
            
            <h1 class="title">{{tour.name}}</h1>
            <p>{{tour.description}}</p>
            <div class="list">
                
                <list-loader loading-msg="loadingMsg"></list-loader>
                
                <div class="list-item-div" ng-if="!loadingMsg" ng-repeat="landmark in tour.landmarks"
                  ng-click="go(landmark)">
                    <div class="list-item-title">
                        {{$index + 1}}. {{landmark.name}}
                    </div>
                    <div class="list-item-subtitle">
                        {{landmark.description[0]}}
                    </div>
                </div>
            </div>
        </div>
    </ion-content>
</ion-view>
